<div>
    <p class="race_name">
        <a href="{{ include.race-info.resultsLink }}" target="_blank">
            {{ include.race-info.raceName }}
        </a>
    </p>
    <table class="results_table">
        <tr>
            <th colspan="3">
                <div class="table-race-info">
                    <span>{{ include.race-info.raceLocation }}</span>
                    <span>{{ include.race-info.raceDate }}</span>
                </div>
                <div class="round-toggle-cont">
                    {% for round in include.race-info.rounds %}
                    {% assign roundId = round.roundName | append: include.race-info.raceId | remove: ' ' %}
                    <div class="round-toggle-btn" id="{{ roundId }}">{{ round.roundName }}</div>
                    {% endfor %}
                </div>
            </th>
        </tr>
        {% for round in include.race-info.rounds %}
        {% assign roundId = round.roundName | append: include.race-info.raceId | remove: ' ' %}
        <tbody id="{{ roundId | append: '-body' }}">
            {% for event in round.events %}
            {% assign eventId = roundId | append: event.eventName | remove: ' ' %}
            <tr>
                <td>{{ event.eventName }}</td>
                <td>{{ event.place }}</td>
                <td>
                    <span class="table-clickable time-info" id="{{ eventId }}">
                        {{ event.time }}
                    </span>
                </td>
            </tr>
            <tr>
                <td colspan="3" class="race-event-info" id="{{ eventId | append: '-body' }}">   
                    <a class="table-clickable watch-race" href="{{ event.videoLink }}" target="_blank">
                        Watch Race - {{ event.eventName }} - {{ round.roundName }}
                    </a>
                    {% for boat in event.ranking %}
                    <div class="ranking-cont">
                        <span>{{ boat.boatName }}</span>
                        <span>{{ boat.time }}</span>
                    </div>
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
        {% endfor %}
    </table>
</div>
<script>
    // Enable tabs for switching between tabs.
    for (const roundButton of document.querySelectorAll(".round-toggle-btn")) {
        roundButton.addEventListener('click', (event) => {
            for (const button of document.querySelectorAll(".round-toggle-btn")) {
                if (button.id == event.srcElement.id) {
                    // Button was selected.
                    button.style.background = "#1e439415"; // Light blue background color.
                    button.style.cursor = "default";
                    document.querySelector(`#${button.id}-body`).style.display = 'block';
                } else {
                    // Button is not selected.
                    button.style.background = 'white';
                    button.style.cursor = "pointer";
                    document.querySelector(`#${button.id}-body`).style.display = 'none';
                }
            }
            // console.log(event.srcElement.id);
        })
    }
    // When the page loads, the first round is selected.
    document.querySelector(".round-toggle-btn").click();

    for (const timeInfo of document.querySelectorAll(".time-info")) {
        timeInfo.addEventListener('click', () => {
            const timeBodyInfo = document.querySelector(`#${timeInfo.id}-body`);
            const currDisplayStyle = timeBodyInfo.style.display;
            // Toggle visibilty of time info when button clicked.
            timeBodyInfo.style.display = currDisplayStyle == 'table-cell' ? 'none' : 'table-cell';
        })
    }
</script>
